// (C) 2025-2026 GoodData Corporation

const depCruiser = require("../../common/config/dep-cruiser/default.config");

options = {
    forbidden: [
        ...depCruiser.DefaultRules,
        ...depCruiser.DefaultSdkRules,
        ...depCruiser.PublicLibraryRules,

        depCruiser.isolatedSubmodule("constants", "src/presentation/constants"),
        depCruiser.isolatedSubmodule("localization", "src/presentation/localization"),
        depCruiser.moduleWithDependencies(
            "presentationComponents",
            "src/presentation/presentationComponents",
            ["src/presentation/export/*", "src/model/*"],
        ),

        // TODO: RAIL-3611
        // depCruiser.moduleWithDependencies("_staging", "src/_staging",["src/types.ts"]),
        depCruiser.moduleWithDependencies("converters", "src/converters", ["src/types.ts"]),
        depCruiser.moduleWithDependencies("componentDefinition", "src/presentation/componentDefinition", [
            "src/model/*",
            "src/presentation/dashboardContexts/*",
            "src/presentation/dragAndDrop/*",
            "src/presentation/filterBar/*",
            "src/presentation/widget/*",
            "src/types.ts",
        ]),
        depCruiser.moduleWithDependencies(
            "dashboard",
            "src/presentation/dashboard/", // the trailing / is necessary here, otherwise dashboardContexts is matched as well
            [
                "src/_staging/*",
                "src/model/*",
                "src/presentation/constants/*",
                "src/presentation/dashboardContexts/*",
                "src/presentation/dialogs/*",
                "src/presentation/dragAndDrop/*",
                "src/presentation/filterBar/*",
                "src/presentation/insightList/*",
                "src/presentation/kpiDeleteDialog/*",
                "src/presentation/flexibleLayout/*",
                "src/presentation/localization/*",
                "src/presentation/scheduledEmail/*",
                "src/presentation/shareDialog/*",
                "src/presentation/deleteDialog/*",
                "src/presentation/widgetDeleteDialog/*",
                "src/presentation/dashboardSettingsDialog/*",
                "src/presentation/cancelEditDialog/*",
                "src/presentation/saveAs/*",
                "src/presentation/alerting/*",
                "src/presentation/export/*",
                "src/presentation/topBar/*",
                "src/presentation/toolbar/*",
                "src/presentation/widget/*",
                "src/presentation/componentDefinition/*",
                "src/types.ts",
            ],
        ),
        depCruiser.moduleWithDependencies("dashboardContexts", "src/presentation/dashboardContexts", [
            "src/model/*",
            "src/presentation/componentDefinition/*",
            "src/presentation/dashboard/*",
            "src/presentation/filterBar/*",
            "src/presentation/flexibleLayout/*",
            "src/presentation/saveAs/*",
            "src/presentation/alerting/*",
            "src/presentation/scheduledEmail/*",
            "src/presentation/shareDialog/*",
            "src/presentation/dashboardSettingsDialog/*",
            "src/presentation/topBar/*",
            "src/presentation/toolbar/*",
            "src/presentation/widget/*",
            "src/presentation/dragAndDrop/*",
            "src/types.ts",
        ]),
        depCruiser.moduleWithDependencies("dialogs", "src/presentation/dialogs", [
            "src/_staging/*",
            "src/presentation/dashboardContexts/*",
            "src/types.ts",
        ]),
        depCruiser.moduleWithDependencies("dragAndDrop", "src/presentation/dragAndDrop", [
            "src/_staging/*",
            "src/model/*",
            "src/types.ts",
            "src/presentation/componentDefinition/*",
            "src/presentation/dashboard/*",
            "src/presentation/dashboardContexts/*",
            "src/presentation/filterBar/*",
            "src/presentation/flexibleLayout/*",
            "src/presentation/widget/*",
            "src/presentation/constants/*",
            "src/presentation/constants.ts",
            "src/widgets/*",
        ]),
        depCruiser.moduleWithDependencies("drill", "src/presentation/drill", [
            "src/_staging/*",
            "src/model/*",
            "src/presentation/constants/*",
            "src/presentation/localization/*",
            "src/kdaDialog/*",
            "src/types.ts",
            "src/converters/*",
            "src/presentation/widget/*",
        ]),
        depCruiser.moduleWithDependencies("filterBar", "src/presentation/filterBar", [
            "src/_staging/*",
            "src/model/*",
            "src/presentation/componentDefinition/*",
            "src/presentation/constants/*",
            "src/presentation/dashboardContexts/*",
            "src/presentation/dragAndDrop/*",
            "src/presentation/flexibleLayout/*",
            "src/presentation/localization/*",
            "src/presentation/widget/*",
            "src/presentation/scheduledEmail/*",
        ]),
        depCruiser.moduleWithDependencies("layout", "src/presentation/layout", [
            "src/_staging/*",
            "src/model/*",
            "src/presentation/componentDefinition/*",
            "src/presentation/constants/*",
            "src/presentation/dashboardContexts/*",
            "src/presentation/dragAndDrop/*",
            "src/presentation/flexibleLayout/*",
            "src/presentation/localization/*",
            "src/presentation/presentationComponents/*",
            "src/presentation/widget/*",
            "src/presentation/export/*",
            "src/types.ts",
            "src/widgets/*",
        ]),
        depCruiser.moduleWithDependencies("logUserInteraction", "src/logUserInteraction", ["src/model/*"]),
        depCruiser.moduleWithDependencies("model", "src/model/*", [
            "src/_staging/*",
            "src/converters/*",
            "src/widgets/*",
            "src/types.ts",
            "src/presentation/dragAndDrop/*",
            "src/presentation/flexibleLayout/*",
            "src/kdaDialog/*",
        ]),
        depCruiser.moduleWithDependencies("presentation", "src/presentation", [
            "src/_staging/*",
            "src/converters/*",
            "src/logUserInteraction/*",
            "src/model/*",
            "src/types.ts",
            "src/widgets/*",
            "src/kdaDialog/*",
        ]),
        depCruiser.moduleWithDependencies("automationFilters", "src/presentation/automationFilters", [
            "src/_staging/*",
            "src/model/*",
            "src/presentation/dashboardContexts/*",
            "src/presentation/localization/*",
            "src/presentation/constants/*",
            "src/presentation/automationFilters/*",
            "src/presentation/filterBar/*",
            "src/presentation/utils.ts",
            "src/converters/*",
            "src/types.ts",
        ]),
        depCruiser.moduleWithDependencies("scheduledEmail", "src/presentation/scheduledEmail", [
            "src/_staging/*",
            "src/model/*",
            "src/presentation/dashboardContexts/*",
            "src/presentation/localization/*",
            "src/presentation/constants/*",
            "src/presentation/automationFilters/*",
            "src/converters/*",
            "src/types.ts",
        ]),
        depCruiser.moduleWithDependencies("alerting", "src/presentation/alerting", [
            "src/_staging/*",
            "src/model/*",
            "src/presentation/dashboardContexts/*",
            "src/presentation/localization/*",
            "src/presentation/constants/*",
            "src/presentation/automationFilters/*",
            "src/presentation/scheduledEmail/*",
            "src/presentation/widget/*",
            "src/converters/*",
            "src/types.ts",
        ]),
        depCruiser.moduleWithDependencies("saveAs", "src/presentation/saveAs", [
            "src/model/*",
            "src/presentation/dashboardContexts/*",
            "src/presentation/localization/*",
            "src/presentation/constants/*",
        ]),
        depCruiser.moduleWithDependencies("topBar", "src/presentation/topBar", [
            "src/_staging/*",
            "src/model/*",
            "src/presentation/dashboardContexts/*",
            "src/presentation/localization/*",
            "src/presentation/constants/*",
            "src/presentation/componentDefinition/*",
            "src/types.ts",
        ]),
        depCruiser.moduleWithDependencies("widget", "src/presentation/widget", [
            "src/_staging/*",
            "src/converters/*",
            "src/logUserInteraction/*",
            "src/model/*",
            "src/kdaDialog/*",
            "src/presentation/componentDefinition/*",
            "src/presentation/constants/*",
            "src/presentation/dashboardContexts/*",
            "src/presentation/dragAndDrop/*",
            "src/presentation/drill/*",
            "src/presentation/insightList/*",
            "src/presentation/dashboardList/*",
            "src/presentation/localization/*",
            "src/presentation/presentationComponents/*",
            "src/presentation/export/*",
            "src/presentation/scheduledEmail/*",
            "src/presentation/alerting/*",
            "src/presentation/topBar/*",
            "src/presentation/flexibleLayout/*",
            "src/presentation/dashboard/*",
            "src/presentation/utils.ts",
            "src/types.ts",
            "src/widgets/*",
        ]),
    ],
    options: depCruiser.DefaultOptions,
};

module.exports = options;
