# Theming System

The theming system allows customization of the UI appearance through a combination of TypeScript theme definitions and CSS variables.

## Theme Structure

Themes are defined using the [`ITheme`](../sdk-model/src/theme/index.ts) interface from `@gooddata/sdk-model`. The theme object can contain various customizable properties like colors, typography, and component-specific styles. This theme object is then passed to the [`ThemeProvider`](./src/ThemeProvider/ThemeProvider.tsx) component (via property or loaded from backend).
All variables used across the codebase are specified in [variablesSpec](./src/variablesSpec), which is used for generating the default theme and validation of the used CSS variables and their defaults across the entire codebase CSS.

## Default Theme

The theming system includes an auto-generated [`defaultTheme.scss`](../sdk-ui-kit/src/@ui/defaultTheme.scss) created from specifications in the [variablesSpec](./src/variablesSpec) folder.
This ensures consistent default values across the application.

It can be re-generated by running the `npm run generate-theme` command in `@gooddata/sdk-ui-kit`.

Tip: You can preview the full default theme with color previews in the storybook in `sdk-ui-tests`.

## Theme Validation

The theming system validates consistent usage of CSS properties and their defaults. Best practices:

-   Avoid using hardcoded defaults in component styles
-   Use CSS variables defined in the theme specification
-   Reference theme variables instead of creating new color values

## CSS Variable Generation

The [`ThemeProvider`](./src/ThemeProvider/ThemeProvider.tsx) automatically:

1. Converts theme object properties to CSS variables
2. Generates derived colors and variables
3. Handles inconsistent variables by adding `-from-theme` suffix to relevant CSS variables
4. Sets variables at the root level for global access

## CSS Variables Specification

Types of CSS variables in specification:

1. **Theme Variables** (`type: "theme"`)

    - Directly configurable through the theme object
    - Defined in `@gooddata/sdk-model` ITheme interface
    - Example: `--gd-palette-primary-base`

2. **Derived Variables** (`type: "derived"`)

    - Automatically calculated from theme variables
    - Cannot be set directly in theme object
    - Example: `--gd-palette-primary-base-t10` (10% transparent primary color)

3. **Internal Variables** (`type: "internal"`)

    - Used internally by components
    - Not meant for public use/customization
    - Example: `--gd-button-L` (button size constants)

4. **Deprecated Variables** (`type: "deprecated"`)

    - Legacy variables that should not be used
    - Will be removed in future versions
    - Example: `--gd-palette-primary-light`

5. **Inconsistent Variables** (`type: "inconsistent"`)
    - Variables with inconsistent default values across codebase (should be eliminated over time)
    - Temporarily suffixed with `-from-theme`
    - Only set when theme is provided via ThemeProvider
    - Will be unified in future versions

## Adding a New Variable to Specification

1. Add new variable to relevant specification file in [variablesSpec](./src/variablesSpec) folder (or create a new file if necessary)
2. Regenerate default theme by running `npm run generate-theme` command in `@gooddata/sdk-ui-kit`
3. Use new variable in your component
4. Validate correct usage by running `rush validate` command, or `npm run validate-theming` in relevant library folder

## Future

If you encounter variables with `-from-theme` suffix, these indicate inconsistent usage that needs to be unified. The long-term goal is to remove these inconsistencies and standardize all theme variable usage. Do not add any new `-from-theme` usages.
