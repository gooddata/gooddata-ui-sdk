// (C) 2025 GoodData Corporation

.gd-ui-kit-button-segmented-control {
    display: flex;

    /**
     * Disable transitions for keyboard navigation to avoid "stale border" artifact.
     */
    &:has(:focus-visible) {
        --gd-transition-all: none;
    }

    /**
     * Per-segment defaults (apply to direct children; values are inherited by nested buttons).
     */
    > * {
        --gd-button-borderRadiusTopLeft: 0;
        --gd-button-borderRadiusBottomLeft: 0;
        --gd-button-borderRadiusTopRight: 0;
        --gd-button-borderRadiusBottomRight: 0;

        position: relative;
    }

    /**
     * Collapse borders between segments by overlapping neighboring segments.
     * On hover/focus, raise the segment above its neighbors to ensure its border is visible.
     */
    > * + * {
        margin-left: -1px;
    }

    /**
     * Stacking order: keyboard focus should win over hover.
     *
     * This prevents visual glitches when focus moves between segments (old border "sticking")
     * and avoids hover on a neighboring segment disrupting the currently focused segment.
     */
    > *:hover {
        z-index: 1;
    }

    > *:focus-within {
        z-index: 2;
    }

    /**
     * Rounded corners for the first/last segment.
     */
    > :first-child {
        --gd-button-borderRadiusTopLeft: var(--gd-button-borderRadius);
        --gd-button-borderRadiusBottomLeft: var(--gd-button-borderRadius);
    }

    > :last-child {
        --gd-button-borderRadiusTopRight: var(--gd-button-borderRadius);
        --gd-button-borderRadiusBottomRight: var(--gd-button-borderRadius);
    }

    /**
     * Layout variants.
     */
    &--layout-fill {
        flex: 1;

        > * {
            flex: 1 1 0;

            --gd-button-width: 100%;
        }
    }
}
