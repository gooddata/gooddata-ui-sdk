# (C) 2024 GoodData Corporation

name: Doc ~ Storybook deploy
on:
  workflow_dispatch:
  schedule:
      - cron: '0 0 * * *'
jobs:
  storybook-deploy:
    secrets: inherit
    uses: ./.github/workflows/rw-doc-storybook-deploy.yml
    permissions:
      contents: write
      id-token: write
    with:
      source-branch: "master"

  slack-notification:
    runs-on: [ubuntu-latest]
    needs: [storybook-deploy]
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.TOKEN_GITHUB_YENKINS}}
      - name: Notify to slack
        uses: ./.github/actions/slack/send-notification
        with:
          message: "The Storybook for *gooddata-ui-sdk* has been successfully deployed. :tada:"
          slack-bot-token: ${{ secrets.SLACK_BOT_TOKEN }}
